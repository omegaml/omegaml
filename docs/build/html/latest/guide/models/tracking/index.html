<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Monitoring model and data drift &mdash; omega-ml 0.16.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=bf4bd5a2" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=4a1014be"></script>
        <script src="../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Experiment Tracking" href="tracking.html" />
    <link rel="prev" title="Working MLFlow models" href="../frameworks/mlflow.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            omega-ml
          </a>
              <div class="version">
                0.16.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart/index.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../intro/index.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../datasets/index.html">Working with datasets</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Working with models</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../modelstore.html">Introduction to models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../metrics.html">Capturing model metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../businessmodels/index.html">Adding business logic to models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../frameworks/index.html">Working with ML frameworks</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Monitoring model and data drift</a><ul>
<li class="toctree-l4"><a class="reference internal" href="tracking.html">Experiment Tracking</a></li>
<li class="toctree-l4"><a class="reference internal" href="datadrift.html">Data Drift</a></li>
<li class="toctree-l4"><a class="reference internal" href="modeldrift.html">Model Drift</a></li>
<li class="toctree-l4"><a class="reference internal" href="automonitoring.html">Automated Drift Monitoring</a></li>
<li class="toctree-l4"><a class="reference internal" href="basics.html">Understanding the Tracking and Monitoring System</a></li>
<li class="toctree-l4"><a class="reference internal" href="#what-is-drift-monitoring">What is drift monitoring?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-does-it-work">How does it work?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#what-is-a-snapshot">What is a snapshot?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-is-drift-identified">How is drift identified?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../jobs/index.html">Working with notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scripts/index.html">Working with scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../streams/index.html">Working with streams</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../clusters/index.html">Deploying models and pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/index.html">Command-line interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/index.html">Advanced features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../integration/index.html">Integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../admin/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devguide/index.html">Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nb/index.html">Tutorial Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../screenshots.html">Screenshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../moreinfo.html">More information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changes/index.html">Changes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">omega-ml</a>
      </nav>

      <div class="wy-nav-content">

<div class="version-warning-banner">
    
    You're reading the documentation for a development version.
    For the latest released version, please have a look at <a href="../../../../release/0.16.3/index.html">release/0.16.3</a>.
    
</div>


        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">User Guide</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Working with models</a></li>
      <li class="breadcrumb-item active">Monitoring model and data drift</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/guide/models/tracking/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="monitoring-model-and-data-drift">
<h1><a class="toc-backref" href="#id1" role="doc-backlink">Monitoring model and data drift</a><a class="headerlink" href="#monitoring-model-and-data-drift" title="Link to this heading">¶</a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#monitoring-model-and-data-drift" id="id1">Monitoring model and data drift</a></p>
<ul>
<li><p><a class="reference internal" href="#what-is-drift-monitoring" id="id2">What is drift monitoring?</a></p></li>
<li><p><a class="reference internal" href="#how-does-it-work" id="id3">How does it work?</a></p></li>
<li><p><a class="reference internal" href="#what-is-a-snapshot" id="id4">What is a snapshot?</a></p></li>
<li><p><a class="reference internal" href="#how-is-drift-identified" id="id5">How is drift identified?</a></p></li>
</ul>
</li>
</ul>
</nav>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="tracking.html">Experiment Tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="datadrift.html">Data Drift</a></li>
<li class="toctree-l1"><a class="reference internal" href="modeldrift.html">Model Drift</a></li>
<li class="toctree-l1"><a class="reference internal" href="automonitoring.html">Automated Drift Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Understanding the Tracking and Monitoring System</a></li>
</ul>
</div>
<section id="what-is-drift-monitoring">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">What is drift monitoring?</a><a class="headerlink" href="#what-is-drift-monitoring" title="Link to this heading">¶</a></h2>
<p>To understand drift monitoring, consider a model that is trained on past customer data and deployed to production,
as shown in the following diagram.</p>
<img alt="../../../_images/monitoring_intro.png" src="../../../_images/monitoring_intro.png" />
<p>Let’s say the model is used for marketing campaign planning, that is to predict which customers are likely to buy
a product. The model is trained on a dataset representing historic (known) data. Current data (not seen before,
also called unknown or new data) is fed to the model to make predictions, that is to determine
whether a given customer should be included in the campaign. At the time of prediction it is unknown whether the
customer will actually buy the product or not, so we don’t know the true outcome yet.</p>
<p>Based on this process we can ask the following questions:</p>
<ol class="arabic simple">
<li><p>How well does the model perform in actually predicting customer behavior?</p></li>
<li><p>Is the current (new) data similar to the data the model was trained on?</p></li>
<li><p>How is the current (new) data changing over time?</p></li>
<li><p>Are the model’s predictions changing over time?</p></li>
</ol>
<p>While the first question is answered by model evaluation, the remaining questions are answered by drift monitoring.</p>
<p>Drift monitoring is the process of detecting changes in the distribution of a model’s input features and
targets over time. omega-ml implements drift monitoring by taking statistical snapshots of input and
target features at regular intervals and comparing each snapshot to a baseline snapshot.</p>
<img alt="../../../_images/monitoring_process.png" src="../../../_images/monitoring_process.png" />
<p>There are two types of drift:</p>
<ul class="simple">
<li><p>Data Drift: Changes in the distribution of input features. We’re interested in P(X) changing over time. This
is also called feature drift.</p></li>
<li><p>Model Drift: Changes in the distribution of target features. We’re interested in P(Y|X) changing
over time. This is also called concept drift.</p></li>
</ul>
<p>Note that Model Drift is a special case of Data Drift, where the target feature (and possibly metrics) are monitored
in addition to the input features.</p>
</section>
<section id="how-does-it-work">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">How does it work?</a><a class="headerlink" href="#how-does-it-work" title="Link to this heading">¶</a></h2>
<p>omega-ml implements both data and concept drift using the concept of a Monitor. A Monitor takes snapshots of data
and compares them to a baseline snapshot. The Monitor can be used interactively, in code, or run automatically
on a schedule. There are two types of Monitors:</p>
<ul class="simple">
<li><p>DataDriftMonitor - to monitor changes in the distribution of features (variables) in any dataset</p></li>
<li><p>ModelDriftMonitor - to monitor changes in the distribution of input features, target features and metrics of
a model.</p></li>
</ul>
<p>The DataDriftMonitor provides the core functionality of drift monitoring, namely:</p>
<ol class="arabic simple">
<li><p>Taking snapshots of data</p></li>
<li><p>Comparing snapshots to determine drift</p></li>
<li><p>Plotting and describing results</p></li>
</ol>
<p>The ModelDriftMonitor extends the DataDriftMonitor to include monitoring of models. It provides the following
additional functionality:</p>
<ol class="arabic simple">
<li><p>Taking snapshots of input features, target features and metrics of a model</p></li>
<li><p>Comparing snapshots to determine drift in input features, target features and metrics</p></li>
<li><p>Capturing alerts when drift is detected</p></li>
</ol>
<p>The ModelDriftMonitor is particularly useful in production scenarios where models are deployed and serving
predictions. It can be attached to a model and scheduled to run at regular intervals to monitor the model’s
performance and the data it is receiving. If drift is detected, the Monitor can raise an alert.</p>
</section>
<section id="what-is-a-snapshot">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">What is a snapshot?</a><a class="headerlink" href="#what-is-a-snapshot" title="Link to this heading">¶</a></h2>
<p>A snapshot is a statistical summary of a dataset at a given point in time. It captures the distribution of
features (variables) in the dataset. A snapshot is used to compare the distribution of features in the dataset
at different points in time. Technically, a snapshot is a Python dict, however we can think of it as a statistical
summary of the dataset that contains the following information:</p>
<ul class="simple">
<li><p>Statistics of each feature (mean, std, min, max, percentiles, histogram)</p></li>
<li><p>Metadata of the dataset (name, length, kind, columns and types)</p></li>
<li><p>Snapshot information (datetime)</p></li>
</ul>
<p>Two or more snapshots are used to compare the distribution of features in a dataset at different points in time.
The comparison is done using statistical tests and visualizations.</p>
</section>
<section id="how-is-drift-identified">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">How is drift identified?</a><a class="headerlink" href="#how-is-drift-identified" title="Link to this heading">¶</a></h2>
<p>Drift is identified by comparing snapshots of data to a baseline snapshot. The comparison is done using statistical
tests and visualizations. The tests and visualizations are used to determine if the distribution of features in the
dataset has changed significantly between any two snapshots. If the distribution has changed significantly, this is
considered a drift. A standardized drift score is calculated to quantify the amount of drift.</p>
<img alt="../../../_images/monitoring_drift.png" src="../../../_images/monitoring_drift.png" />
<p>The following metrics are calculated for each feature in the dataset:</p>
<ul class="simple">
<li><p>Kolmogorov-Smirnov (KS) statistic: A measure of the difference between two distributions (numerical features)</p></li>
<li><p>Wasserstein distance: A measure of the distance between two distributions (numerical features)</p></li>
<li><p>Chi-squared statistic: A measure of the difference between two distributions (categorical features)</p></li>
</ul>
<p>The following visualizations are used to visualize any two snapshots:</p>
<ul class="simple">
<li><p>Histograms - distribution numerical features in the dataset</p></li>
<li><p>Bar plots - distribution of categorical features in the dataset</p></li>
<li><p>Line plots - drift metrics over time</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../frameworks/mlflow.html" class="btn btn-neutral float-left" title="Working MLFlow models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tracking.html" class="btn btn-neutral float-right" title="Experiment Tracking" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022 (c) omegaml.io by one2seven GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>

      </div>
    </section>
  </div>
  <!-- version plugin for rtd template without sidebar -->
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: latest
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Tags</dt>
      <dd><a href="../../../../0.11.3/index.html" class="version-ref-0.11.3">0.11.3</a></dd>
      <dd><a href="../../../../0.11.4/index.html" class="version-ref-0.11.4">0.11.4</a></dd>
      <dd><a href="../../../../0.12.0/index.html" class="version-ref-0.12.0">0.12.0</a></dd>
      <dd><a href="../../../../0.13.0/index.html" class="version-ref-0.13.0">0.13.0</a></dd>
      <dd><a href="../../../../0.13.2/index.html" class="version-ref-0.13.2">0.13.2</a></dd>
      <dd><a href="../../../../0.13.4/index.html" class="version-ref-0.13.4">0.13.4</a></dd>
      <dd><a href="../../../../0.13.5/index.html" class="version-ref-0.13.5">0.13.5</a></dd>
      <dd><a href="../../../../0.13.6/index.html" class="version-ref-0.13.6">0.13.6</a></dd>
      <dd><a href="../../../../0.13.7/index.html" class="version-ref-0.13.7">0.13.7</a></dd>
      <dd><a href="../../../../0.14.0/index.html" class="version-ref-0.14.0">0.14.0</a></dd>
      <dd><a href="../../../../0.15.1/index.html" class="version-ref-0.15.1">0.15.1</a></dd>
      <dd><a href="../../../../0.15.2/index.html" class="version-ref-0.15.2">0.15.2</a></dd>
      <dd><a href="index.html" class="version-ref-latest">latest</a></dd>
      <dd><a href="../../../../release/0.15.3/index.html" class="version-ref-release/0.15.3">0.15.3</a></dd>
      <dd><a href="../../../../release/0.15.5/index.html" class="version-ref-release/0.15.5">0.15.5</a></dd>
      <dd><a href="../../../../release/0.16.0/index.html" class="version-ref-release/0.16.0">0.16.0</a></dd>
      <dd><a href="../../../../release/0.16.1/index.html" class="version-ref-release/0.16.1">0.16.1</a></dd>
      <dd><a href="../../../../release/0.16.2/index.html" class="version-ref-release/0.16.2">0.16.2</a></dd>
      <dd><a href="../../../../release/0.16.3/index.html" class="version-ref-release/0.16.3">0.16.3</a></dd>
      <dd><a href="../../../../release/0.4/index.html" class="version-ref-release/0.4">0.4</a></dd>
      <dd><a href="../../../../release/0.5/index.html" class="version-ref-release/0.5">0.5</a></dd>
      <dd><a href="../../../../release/0.9/index.html" class="version-ref-release/0.9">0.9</a></dd>
      <dd><a href="../../../../stable/index.html" class="version-ref-stable">stable</a></dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="../../../../master/guide/models/tracking/index.html">master</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>