

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>om.datasets &mdash; omega-ml 1.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=7ca4e891" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=56dcb7b8"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="om.models" href="models.html" />
    <link rel="prev" title="core models" href="core.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            omega-ml
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devguide/index.html">Development Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="core.html">core models</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">om.datasets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#omegaml.datasets"><code class="docutils literal notranslate"><span class="pre">datasets</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#backends">Backends</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#omegaml.backends.sqlalchemy.SQLAlchemyBackend"><code class="docutils literal notranslate"><span class="pre">SQLAlchemyBackend</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#omegaml.backends.npndarray.NumpyNDArrayBackend"><code class="docutils literal notranslate"><span class="pre">NumpyNDArrayBackend</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#omegaml.backends.virtualobj.VirtualObjectBackend"><code class="docutils literal notranslate"><span class="pre">VirtualObjectBackend</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#omegaml.backends.rawdict.PandasRawDictBackend"><code class="docutils literal notranslate"><span class="pre">PandasRawDictBackend</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#omegaml.backends.rawfiles.PythonRawFileBackend"><code class="docutils literal notranslate"><span class="pre">PythonRawFileBackend</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#mixins">Mixins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#omegaml.mixins.store.ProjectedMixin"><code class="docutils literal notranslate"><span class="pre">ProjectedMixin</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#omegaml.mixins.store.LazyGetMixin"><code class="docutils literal notranslate"><span class="pre">LazyGetMixin</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#omegaml.mixins.store.virtualobj.VirtualObjectMixin"><code class="docutils literal notranslate"><span class="pre">VirtualObjectMixin</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#omegaml.mixins.store.promotion.PromotionMixin"><code class="docutils literal notranslate"><span class="pre">PromotionMixin</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#omegaml.mixins.mdf.iotools.IOToolsStoreMixin"><code class="docutils literal notranslate"><span class="pre">IOToolsStoreMixin</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="models.html">om.models</a></li>
<li class="toctree-l2"><a class="reference internal" href="jobs.html">om.jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripts.html">om.scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="runtimes.html">om.runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="mdataframe.html">omegaml.mdataframe</a></li>
<li class="toctree-l2"><a class="reference internal" href="tracking.html">omegaml.runtime.experiment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../nb/index.html">Tutorial Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../screenshots.html">Screenshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../moreinfo.html">More information</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">omega-ml</a>
      </nav>

      <div class="wy-nav-content">


        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Reference</a></li>
      <li class="breadcrumb-item active">om.datasets</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/reference/datasets.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="om-datasets">
<h1><a class="toc-backref" href="#id5" role="doc-backlink">om.datasets</a><a class="headerlink" href="#om-datasets" title="Link to this heading">¶</a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#om-datasets" id="id5">om.datasets</a></p>
<ul>
<li><p><a class="reference internal" href="#backends" id="id6">Backends</a></p></li>
<li><p><a class="reference internal" href="#mixins" id="id7">Mixins</a></p></li>
</ul>
</li>
</ul>
</nav>
<dl class="py data">
<dt class="sig sig-object py" id="omegaml.datasets">
<span class="sig-prename descclassname"><span class="pre">omegaml.</span></span><span class="sig-name descname"><span class="pre">datasets</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">OmegaStore(bucket=omegaml,</span> <span class="pre">prefix=data/)</span></em><a class="headerlink" href="#omegaml.datasets" title="Link to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="core.html#omegaml.store.base.OmegaStore" title="omegaml.store.base.OmegaStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">omegaml.store.base.OmegaStore</span></code></a> store for datasets</p>
<p>Methods:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="core.html#omegaml.store.base.OmegaStore.list" title="omegaml.store.base.OmegaStore.list"><code class="xref py py-meth docutils literal notranslate"><span class="pre">omegaml.store.base.OmegaStore.list()</span></code></a></p></li>
<li><p><a class="reference internal" href="core.html#omegaml.store.base.OmegaStore.get" title="omegaml.store.base.OmegaStore.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">omegaml.store.base.OmegaStore.get()</span></code></a></p></li>
<li><p><a class="reference internal" href="core.html#omegaml.store.base.OmegaStore.getl" title="omegaml.store.base.OmegaStore.getl"><code class="xref py py-meth docutils literal notranslate"><span class="pre">omegaml.store.base.OmegaStore.getl()</span></code></a></p></li>
<li><p><a class="reference internal" href="core.html#omegaml.store.base.OmegaStore.put" title="omegaml.store.base.OmegaStore.put"><code class="xref py py-meth docutils literal notranslate"><span class="pre">omegaml.store.base.OmegaStore.put()</span></code></a></p></li>
<li><p><a class="reference internal" href="core.html#omegaml.store.base.OmegaStore.drop" title="omegaml.store.base.OmegaStore.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">omegaml.store.base.OmegaStore.drop()</span></code></a></p></li>
<li><p><a class="reference internal" href="core.html#omegaml.store.base.OmegaStore.exists" title="omegaml.store.base.OmegaStore.exists"><code class="xref py py-meth docutils literal notranslate"><span class="pre">omegaml.store.base.OmegaStore.exists()</span></code></a></p></li>
<li><p><a class="reference internal" href="core.html#omegaml.store.base.OmegaStore.metadata" title="omegaml.store.base.OmegaStore.metadata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">omegaml.store.base.OmegaStore.metadata()</span></code></a></p></li>
<li><p><a class="reference internal" href="core.html#omegaml.store.base.OmegaStore.help" title="omegaml.store.base.OmegaStore.help"><code class="xref py py-meth docutils literal notranslate"><span class="pre">omegaml.store.base.OmegaStore.help()</span></code></a></p></li>
</ul>
</div></blockquote>
<p>Mixins:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#omegaml.mixins.store.ProjectedMixin" title="omegaml.mixins.store.ProjectedMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">omegaml.mixins.store.ProjectedMixin</span></code></a></p></li>
<li><p><a class="reference internal" href="#omegaml.mixins.store.LazyGetMixin" title="omegaml.mixins.store.LazyGetMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">omegaml.mixins.store.LazyGetMixin</span></code></a></p></li>
<li><p><a class="reference internal" href="models.html#omegaml.mixins.store.virtualobj.VirtualObjectMixin" title="omegaml.mixins.store.virtualobj.VirtualObjectMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">omegaml.mixins.store.virtualobj.VirtualObjectMixin</span></code></a></p></li>
<li><p><a class="reference internal" href="models.html#omegaml.mixins.store.promotion.PromotionMixin" title="omegaml.mixins.store.promotion.PromotionMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">omegaml.mixins.store.promotion.PromotionMixin</span></code></a></p></li>
<li><p><a class="reference internal" href="#omegaml.mixins.mdf.iotools.IOToolsStoreMixin" title="omegaml.mixins.mdf.iotools.IOToolsStoreMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">omegaml.mixins.mdf.iotools.IOToolsStoreMixin</span></code></a></p></li>
</ul>
</div></blockquote>
<p>Backends:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#omegaml.backends.npndarray.NumpyNDArrayBackend" title="omegaml.backends.npndarray.NumpyNDArrayBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">omegaml.backends.npndarray.NumpyNDArrayBackend</span></code></a>,</p></li>
<li><p><a class="reference internal" href="#omegaml.backends.virtualobj.VirtualObjectBackend" title="omegaml.backends.virtualobj.VirtualObjectBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">omegaml.backends.virtualobj.VirtualObjectBackend</span></code></a>,</p></li>
<li><p><a class="reference internal" href="#omegaml.backends.rawdict.PandasRawDictBackend" title="omegaml.backends.rawdict.PandasRawDictBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">omegaml.backends.rawdict.PandasRawDictBackend</span></code></a>,</p></li>
<li><p><a class="reference internal" href="#omegaml.backends.rawfiles.PythonRawFileBackend" title="omegaml.backends.rawfiles.PythonRawFileBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">omegaml.backends.rawfiles.PythonRawFileBackend</span></code></a>,</p></li>
</ul>
</div></blockquote>
</dd></dl>

<section id="backends">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Backends</a><a class="headerlink" href="#backends" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="omegaml.backends.sqlalchemy.SQLAlchemyBackend">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">omegaml.backends.sqlalchemy.</span></span><span class="sig-name descname"><span class="pre">SQLAlchemyBackend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/sqlalchemy.html#SQLAlchemyBackend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.sqlalchemy.SQLAlchemyBackend" title="Link to this definition">¶</a></dt>
<dd><p>sqlalchemy plugin for omegaml</p>
<p>Usage:</p>
<blockquote>
<div><p>Define your sqlalchemy connection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sqlalchemy_constr</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;sqlalchemy://</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="s1">@</span><span class="si">{</span><span class="n">account</span><span class="si">}</span><span class="s1">/&#39;</span>
</pre></div>
</div>
<p>Store the connection in any of three ways:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -- just the connection</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">sqlalchemy_constr</span><span class="p">,</span> <span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="n">the</span> <span class="n">sql</span> <span class="n">connection</span> <span class="nb">object</span>

<span class="c1"># -- store connection with a predefined sql</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">sqlalchemy_constr</span><span class="p">,</span> <span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">,</span>
                <span class="n">sql</span><span class="o">=</span><span class="s1">&#39;select ....&#39;</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="n">will</span> <span class="k">return</span> <span class="n">a</span> <span class="n">pandas</span> <span class="n">dataframe</span> <span class="n">using</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">sql</span> <span class="n">to</span> <span class="n">run</span><span class="o">.</span>
   <span class="n">specify</span> <span class="n">chunksize</span><span class="o">=</span> <span class="n">to</span> <span class="k">return</span> <span class="n">an</span> <span class="n">interable</span> <span class="n">of</span> <span class="n">dataframes</span>

<span class="c1"># -- predefined sqls can contain variables to be resolved at access time</span>
<span class="c1">#    if you miss to specify required variables in sqlvars, a KeyError is raised</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">sqlaclhemy_constr</span><span class="p">,</span> <span class="s1">&#39;myview&#39;</span><span class="p">,</span>
                <span class="n">sql</span><span class="o">=</span><span class="s1">&#39;select ... from T1 where col=&quot;</span><span class="si">{var}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">,</span> <span class="n">sqlvars</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">))</span>

<span class="c1"># -- Variables are replaced by binding parameters, which is safe for</span>
<span class="c1">#    untrusted inputs. To replace variables as strings, use double</span>
<span class="c1">#    `{{variable}}` notation. A warning will be issued because this</span>
<span class="c1">#    is considered an unsafe practice for untrusted input (REST API).</span>
<span class="c1">#    It is in your responsibility to sanitize the value of the `cols` variable.</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">sqlaclhemy_constr</span><span class="p">,</span> <span class="s1">&#39;myview&#39;</span><span class="p">,</span>
                <span class="n">sql</span><span class="o">=</span><span class="s1">&#39;select {{cols}} from T1 where col=&quot;</span><span class="si">{var}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">,</span> <span class="n">sqlvars</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">cols</span><span class="o">=</span><span class="s1">&#39;foo, bar&#39;</span><span class="p">,</span>
                                             <span class="n">var</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Query data from a connection and store into an omega-ml dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -- copy the result of the sqlalchemy query to omegaml</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">sqlalchemy_constr</span><span class="p">,</span> <span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">,</span>
                <span class="n">sql</span><span class="o">=</span><span class="s1">&#39;select ...&#39;</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="n">will</span> <span class="k">return</span> <span class="n">a</span> <span class="n">pandas</span> <span class="n">dataframe</span> <span class="p">(</span><span class="n">without</span> <span class="n">executing</span> <span class="nb">any</span> <span class="n">additional</span> <span class="n">queries</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="n">can</span> <span class="n">also</span> <span class="n">use</span> <span class="k">with</span> <span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">getl</span><span class="p">(</span><span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">)</span> <span class="n">to</span> <span class="k">return</span> <span class="n">a</span> <span class="n">MDataFrame</span>
</pre></div>
</div>
<p>Controlling the table used in the connection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -- the default table is {bucket}_{name}, override using table=&#39;myname&#39;</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">sqlalchemy_constr</span><span class="p">,</span> <span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">,</span>
                <span class="n">table</span><span class="o">=</span><span class="s1">&#39;mytable&#39;</span><span class="p">,</span>
                <span class="n">sql</span><span class="o">=</span><span class="s1">&#39;select ...&#39;</span><span class="p">,</span>
                <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">)</span> <span class="c1"># read from {bucket}_myname</span>

<span class="c1"># -- to use a specific table, without bucket information use table=&#39;:myname&#39;</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">sqlalchemy_constr</span><span class="p">,</span> <span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">,</span>
                <span class="n">table</span><span class="o">=</span><span class="s1">&#39;:mytable&#39;</span><span class="p">,</span>
                <span class="n">sql</span><span class="o">=</span><span class="s1">&#39;select ...&#39;</span><span class="p">,</span>
                <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">)</span> <span class="c1"># read from myname</span>
</pre></div>
</div>
<p>Inserting data via a previously stored connection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -- store data back through the connection</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">sqlalchemy_constr</span><span class="p">,</span> <span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;mysqlalchemy&#39;</span><span class="p">,</span>
                <span class="n">table</span><span class="o">=</span><span class="s1">&#39;SOMETABLE&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Using variables in connection strings:</p>
<p>Connection strings may contain variables, e.g. userid and password.
By default variables are resolved from the os environment. Can also
specify using any dict.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -- use connection string with variables</span>
<span class="n">sqlalchemy_constr</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///</span><span class="si">{dbname}</span><span class="s1">.db&#39;</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">sqlalchemy_constr</span><span class="p">,</span> <span class="s1">&#39;userdb&#39;</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;userdb&#39;</span><span class="p">,</span> <span class="n">secrets</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s1">&#39;chuckdb&#39;</span><span class="p">))</span>

<span class="c1"># -- alternatively, create a vault dataset:</span>
<span class="n">secrets</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">userid</span><span class="o">=</span><span class="s1">&#39;chuck&#39;</span><span class="p">,</span> <span class="n">dbname</span><span class="o">=</span><span class="s1">&#39;chuckdb&#39;</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">secrets</span><span class="p">,</span> <span class="s1">&#39;.omega/vault&#39;</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;userdb&#39;</span><span class="p">)</span>

<span class="n">the</span> <span class="s1">&#39;.omega/vault&#39;</span> <span class="n">dataset</span> <span class="n">will</span> <span class="n">be</span> <span class="n">queried</span> <span class="n">using</span> <span class="n">the</span> <span class="n">current</span> <span class="n">userid</span> <span class="k">as</span>
<span class="n">the</span> <span class="n">secret</span> <span class="n">name</span><span class="p">,</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">dbname</span> <span class="n">retrieved</span> <span class="kn">from</span><span class="w"> </span><span class="nn">the</span> <span class="n">document</span><span class="o">.</span> <span class="n">This</span> <span class="ow">is</span>
<span class="n">experimental</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">vault</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">encrypted</span><span class="o">.</span>
</pre></div>
</div>
</div></blockquote>
<p>Advanced:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">om.datasets.put()</span></code> supports the following additional keyword arguments</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">chunksize=int</span></code> - specify the number of rows to read from sqlalchemy in one chunk.
defaults to 10000</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parse_dates=['col',</span> <span class="pre">...]</span></code> - list of column names to parse for date, time or datetime.
see pd.read_sql for details</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transform=callable</span></code> - a callable, is passed the DataFrame of each chunk before it
is inserted into the database. use to provide custom transformations.
only works on copy=True</p></li>
<li><p>any other kwargs supported by <code class="docutils literal notranslate"><span class="pre">pandas.read_sql</span></code></p></li>
</ul>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="omegaml.backends.sqlalchemy.SQLAlchemyBackend.KIND">
<span class="sig-name descname"><span class="pre">KIND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'sqlalchemy.conx'</span></em><a class="headerlink" href="#omegaml.backends.sqlalchemy.SQLAlchemyBackend.KIND" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.sqlalchemy.SQLAlchemyBackend.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sql</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunksize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sqlvars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">secrets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lazy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trusted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/sqlalchemy.html#SQLAlchemyBackend.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.sqlalchemy.SQLAlchemyBackend.get" title="Link to this definition">¶</a></dt>
<dd><p>retrieve a stored connection or query data from connection</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – the name of the connection</p></li>
<li><p><strong>secrets</strong> (<em>dict</em>) – dict to resolve variables in the connection string</p></li>
<li><p><strong>keep</strong> (<em>bool</em>) – if True connection is kept open, defaults to True (change
default by setting om.defaults.SQLALCHEMY_ALWAYS_CACHE = False)</p></li>
<li><p><strong>table</strong> (<em>str</em>) – the name of the table, will be prefixed with the
store’s bucket name unless the table is specified as ‘:name’</p></li>
<li><p><strong>trusted</strong> (<em>bool</em><em>|</em><em>str</em>) – if passed must be the value for store.sign(sqlvars or kwargs),
otherwise a warning is issued for any remaining variables in the sql statement</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>connection</p>
</dd>
</dl>
<p>To query data and return a DataFrame, specify <code class="docutils literal notranslate"><span class="pre">sql='select</span> <span class="pre">...'</span></code>:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sql</strong> (<em>str</em>) – the sql query, defaults to the query specific on .put()</p></li>
<li><p><strong>chunksize</strong> (<em>int</em>) – the number of records for each chunk, if
specified returns an iterator</p></li>
<li><p><strong>sqlvars</strong> (<em>dict</em>) – optional, if specified will be used to format sql</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>pd.DataFrame</p>
</dd>
</dl>
<p>To get the connection for a data query, instead of a DataFrame:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>raw</strong> (<em>bool</em>) – if True, returns the raw sql alchemy connection</p></li>
<li><p><strong>keep</strong> (<em>bool</em>) – option, if True keeps the connection open. Lazy=True
implies keep=True. This is potentially unsafe in a multi-user
environment where connection strings contain user-specific
secrets. To always keep connections open, set
<code class="docutils literal notranslate"><span class="pre">om.datasets.defaults.SQLALCHEMY_ALWAYS_CACHE=True</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>connection</p>
</dd>
</dl>
<p>To get a cursor for a data query, instead of a DataFrame. Note this
implies keep=True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lazy</strong> (<em>bool</em>) – if True, returns a cursor instead of a DataFrame</p></li>
<li><p><strong>sql</strong> (<em>str</em>) – the sql query, defaults to the query specific on .put()</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>cursor</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.sqlalchemy.SQLAlchemyBackend.put">
<span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sql</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunksize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insert</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">secrets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/sqlalchemy.html#SQLAlchemyBackend.put"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.sqlalchemy.SQLAlchemyBackend.put" title="Link to this definition">¶</a></dt>
<dd><p>store sqlalchemy connection or insert data into an existing connection</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>str</em><em>|</em><em>pd.DataFrame</em>) – the sqlalchemy connection string or a dataframe object</p></li>
<li><p><strong>name</strong> (<em>str</em>) – the name of the object</p></li>
<li><p><strong>table</strong> (<em>str</em>) – optional, if specified is stored along connection</p></li>
<li><p><strong>sql</strong> (<em>str</em>) – optional, if specified is stored along connection</p></li>
<li><p><strong>copy</strong> (<em>bool</em>) – optional, if True the connection is queried using sql
and the resulting data is stored instead, see below</p></li>
<li><p><strong>attributes</strong> (<em>dict</em>) – optional, set or update metadata.attributes</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>metadata of the stored connection</p>
</dd>
</dl>
<p>Instead of inserting the connection specify <code class="docutils literal notranslate"><span class="pre">copy=True</span></code> to query data
and store it as a DataFrame dataset given by <code class="docutils literal notranslate"><span class="pre">name</span></code>:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sql</strong> (<em>str</em>) – sql to query</p></li>
<li><p><strong>append</strong> (<em>bool</em>) – if True the data is appended if exists already</p></li>
<li><p><strong>chunksize</strong> (<em>int</em>) – number of records to query in each chunk</p></li>
<li><p><strong>transform</strong> (<em>callable</em>) – passed as DataFrame.to_sql(method=)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>metadata of the inserted dataframe</p>
</dd>
</dl>
<p>To insert data via a previously stored connection, specify <code class="docutils literal notranslate"><span class="pre">insert=True</span></code>:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>insert</strong> (<em>bool</em>) – specify True to insert via the connection</p></li>
<li><p><strong>table</strong> (<em>str</em>) – the table name to use for inserting data</p></li>
<li><p><strong>append</strong> (<em>bool</em>) – if False will replace any existing table, defaults to True</p></li>
<li><p><strong>index</strong> (<em>bool</em>) – if False will not attempt to create an index in target, defaults to False</p></li>
<li><p><strong>chunksize</strong> (<em>int</em>) – number of records to insert in each chunk</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>metadata of the connection</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.sqlalchemy.SQLAlchemyBackend.supports">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">supports</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">insert</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/sqlalchemy.html#SQLAlchemyBackend.supports"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.sqlalchemy.SQLAlchemyBackend.supports" title="Link to this definition">¶</a></dt>
<dd><p>test if this backend supports this obj</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="omegaml.backends.npndarray.NumpyNDArrayBackend">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">omegaml.backends.npndarray.</span></span><span class="sig-name descname"><span class="pre">NumpyNDArrayBackend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/npndarray.html#NumpyNDArrayBackend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.npndarray.NumpyNDArrayBackend" title="Link to this definition">¶</a></dt>
<dd><p>Store numpy NDArray of any shape or size</p>
<p>The NDArray is serialized to a byte string and stored as a BLOB.
Thus it can have arbitrary size and dimensions, ideal for image
data and Tensors.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="omegaml.backends.npndarray.NumpyNDArrayBackend.KIND">
<span class="sig-name descname"><span class="pre">KIND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'ndarray.bin'</span></em><a class="headerlink" href="#omegaml.backends.npndarray.NumpyNDArrayBackend.KIND" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.npndarray.NumpyNDArrayBackend.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_python</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lazy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/npndarray.html#NumpyNDArrayBackend.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.npndarray.NumpyNDArrayBackend.get" title="Link to this definition">¶</a></dt>
<dd><p>get an obj</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> – the name of the object (str)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the object as it was originally stored</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.npndarray.NumpyNDArrayBackend.put">
<span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_pickle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/npndarray.html#NumpyNDArrayBackend.put"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.npndarray.NumpyNDArrayBackend.put" title="Link to this definition">¶</a></dt>
<dd><p>put an obj</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – the object to store (object)</p></li>
<li><p><strong>name</strong> – the name of the object (str)</p></li>
<li><p><strong>attributes</strong> – the attributes dict (dict, optional)</p></li>
<li><p><strong>kwargs</strong> – other kwargs to be passed to the Metadata object</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the Metadata object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.npndarray.NumpyNDArrayBackend.supports">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">supports</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_pydata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/npndarray.html#NumpyNDArrayBackend.supports"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.npndarray.NumpyNDArrayBackend.supports" title="Link to this definition">¶</a></dt>
<dd><p>test if this backend supports this obj</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="omegaml.backends.virtualobj.VirtualObjectBackend">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">omegaml.backends.virtualobj.</span></span><span class="sig-name descname"><span class="pre">VirtualObjectBackend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/virtualobj.html#VirtualObjectBackend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.virtualobj.VirtualObjectBackend" title="Link to this definition">¶</a></dt>
<dd><p>Support arbitrary functions as object handlers</p>
<p>Virtual object functions can be any callable that provides a __omega_virtual__
attribute. The callable must support the following signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@virtualobj</span>
<span class="k">def</span><span class="w"> </span><span class="nf">virtualobjfn</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;get|put|drop&#39;</span><span class="p">,</span>
                 <span class="n">meta</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>
</div>
<p>Note that there is a distinction between storing the function as a virtual object,
and passing data in or getting data out of the store. It is the responsibility
of the function to implement the appropriate code for get, put, drop, as well as
to keep track of the data it actually stores.</p>
<p>As a convenience virtual object handlers can be implemented as a subclass of
VirtualObjectHandler</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">a</span> <span class="n">virtual</span> <span class="n">data</span> <span class="n">handler</span>

    <span class="c1"># create the &#39;foo&#39; virtual object</span>
    <span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">virtualobjfn</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span>

    <span class="c1"># get data from the virtualobj</span>
    <span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
    <span class="o">=&gt;</span> <span class="n">will</span> <span class="n">call</span> <span class="n">virtualobjfn</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;get&#39;</span><span class="p">)</span>

    <span class="c1"># put data into the virtualobj</span>
    <span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span>
    <span class="o">=&gt;</span> <span class="n">will</span> <span class="n">call</span> <span class="n">virtualobjfn</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;put&#39;</span><span class="p">)</span>

    <span class="c1"># drop the virtualfn</span>
    <span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
    <span class="o">=&gt;</span> <span class="n">will</span> <span class="n">call</span> <span class="n">virtualobjfn</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;drop&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">then</span>
       <span class="n">drop</span> <span class="n">the</span> <span class="n">virtual</span> <span class="nb">object</span> <span class="n">completely</span> <span class="kn">from</span><span class="w"> </span><span class="nn">the</span> <span class="n">storage</span>

<span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="n">a</span> <span class="n">virtual</span> <span class="n">model</span>

    <span class="c1"># create the mymodel model as a virtualobj</span>
    <span class="n">om</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">virtualobjfn</span><span class="p">,</span> <span class="s1">&#39;mymodel&#39;</span><span class="p">)</span>

    <span class="c1"># run the model&#39;s predict() function</span>
    <span class="n">om</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="n">model</span><span class="p">(</span><span class="s1">&#39;mymodel&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
    <span class="o">=&gt;</span> <span class="n">will</span> <span class="n">call</span> <span class="n">virtualobjfn</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;predict&#39;</span><span class="p">)</span>

<span class="mi">3</span><span class="p">)</span> <span class="k">as</span> <span class="n">a</span> <span class="n">virtual</span> <span class="n">script</span>

    <span class="c1"># create the myscript script as a virtualobj</span>
    <span class="n">om</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">virtualobjfn</span><span class="p">,</span> <span class="s1">&#39;myscript&#39;</span><span class="p">)</span>

    <span class="c1"># run the script</span>
    <span class="n">om</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="n">script</span><span class="p">(</span><span class="s1">&#39;myscript&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="o">=&gt;</span> <span class="n">will</span> <span class="n">call</span> <span class="n">virtualobjfn</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;run&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Virtual objects are executed in the address space of the client or
runtime context. Make sure that the source of the code is trustworthy.
Note that this is different from Backends and Mixins as these are
pro-actively enabled by the administrator of the client or runtime
context, respectively - virtual objects can be injected by anyone
who are authorized to write data.</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="omegaml.backends.virtualobj.VirtualObjectBackend.KIND">
<span class="sig-name descname"><span class="pre">KIND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'virtualobj.dill'</span></em><a class="headerlink" href="#omegaml.backends.virtualobj.VirtualObjectBackend.KIND" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.virtualobj.VirtualObjectBackend.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_python</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lazy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/virtualobj.html#VirtualObjectBackend.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.virtualobj.VirtualObjectBackend.get" title="Link to this definition">¶</a></dt>
<dd><p>get an obj</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> – the name of the object (str)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the object as it was originally stored</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.virtualobj.VirtualObjectBackend.put">
<span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dill_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/virtualobj.html#VirtualObjectBackend.put"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.virtualobj.VirtualObjectBackend.put" title="Link to this definition">¶</a></dt>
<dd><p>put an obj</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – the object to store (object)</p></li>
<li><p><strong>name</strong> – the name of the object (str)</p></li>
<li><p><strong>attributes</strong> – the attributes dict (dict, optional)</p></li>
<li><p><strong>kwargs</strong> – other kwargs to be passed to the Metadata object</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the Metadata object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.virtualobj.VirtualObjectBackend.reduce">
<span class="sig-name descname"><span class="pre">reduce</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modelname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/virtualobj.html#VirtualObjectBackend.reduce"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.virtualobj.VirtualObjectBackend.reduce" title="Link to this definition">¶</a></dt>
<dd><p>reduce a list of results to a single result</p>
<p>Use this as the last step in a task canvas</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>modelname</strong> (<em>str</em>) – the name of the virtualobj</p></li>
<li><p><strong>results</strong> (<em>list</em>) – the list of results forwarded by task canvas</p></li>
<li><p><strong>rName</strong> (<em>result</em>) – the name of the result object</p></li>
<li><p><strong>**kwargs</strong></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>result of the virtualobj handler</p>
</dd>
</dl>
<dl class="simple">
<dt>See Also</dt><dd><p>om.runtime.mapreduce</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.virtualobj.VirtualObjectBackend.supports">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">supports</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/virtualobj.html#VirtualObjectBackend.supports"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.virtualobj.VirtualObjectBackend.supports" title="Link to this definition">¶</a></dt>
<dd><p>test if this backend supports this obj</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="omegaml.backends.rawdict.PandasRawDictBackend">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">omegaml.backends.rawdict.</span></span><span class="sig-name descname"><span class="pre">PandasRawDictBackend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/rawdict.html#PandasRawDictBackend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.rawdict.PandasRawDictBackend" title="Link to this definition">¶</a></dt>
<dd><p>OmegaStore backend to support arbitrary collections</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># store any collection as part of metadata</span>
<span class="n">coll</span> <span class="o">=</span> <span class="n">db</span><span class="p">[</span><span class="s1">&#39;some_collection&#39;</span><span class="p">]</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">coll</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="n">Metadata</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;some_collection&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c1"># parse the collection using pandas.io.json_normalize</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="c1"># use an alternate parser that accepts dict|list(dict)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="n">some_fn</span><span class="p">)</span>
<span class="c1"># get a MDataFrame</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">getl</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="c1"># preserve all document keys, including _id</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">getl</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="omegaml.backends.rawdict.PandasRawDictBackend.KIND">
<span class="sig-name descname"><span class="pre">KIND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'pandas.rawdict'</span></em><a class="headerlink" href="#omegaml.backends.rawdict.PandasRawDictBackend.KIND" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.rawdict.PandasRawDictBackend.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lazy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parser</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/rawdict.html#PandasRawDictBackend.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.rawdict.PandasRawDictBackend.get" title="Link to this definition">¶</a></dt>
<dd><p>get an obj</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> – the name of the object (str)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the object as it was originally stored</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.rawdict.PandasRawDictBackend.put">
<span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/rawdict.html#PandasRawDictBackend.put"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.rawdict.PandasRawDictBackend.put" title="Link to this definition">¶</a></dt>
<dd><p>put an obj</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – the object to store (object)</p></li>
<li><p><strong>name</strong> – the name of the object (str)</p></li>
<li><p><strong>attributes</strong> – the attributes dict (dict, optional)</p></li>
<li><p><strong>kwargs</strong> – other kwargs to be passed to the Metadata object</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the Metadata object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.rawdict.PandasRawDictBackend.supports">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">supports</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/rawdict.html#PandasRawDictBackend.supports"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.rawdict.PandasRawDictBackend.supports" title="Link to this definition">¶</a></dt>
<dd><p>test if this backend supports this obj</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="omegaml.backends.rawfiles.PythonRawFileBackend">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">omegaml.backends.rawfiles.</span></span><span class="sig-name descname"><span class="pre">PythonRawFileBackend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_store</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tracking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/rawfiles.html#PythonRawFileBackend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.rawfiles.PythonRawFileBackend" title="Link to this definition">¶</a></dt>
<dd><p>OmegaStore backend to support arbitrary files</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="omegaml.backends.rawfiles.PythonRawFileBackend.KIND">
<span class="sig-name descname"><span class="pre">KIND</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'python.file'</span></em><a class="headerlink" href="#omegaml.backends.rawfiles.PythonRawFileBackend.KIND" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.rawfiles.PythonRawFileBackend.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'wb'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunksize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/rawfiles.html#PythonRawFileBackend.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.rawfiles.PythonRawFileBackend.get" title="Link to this definition">¶</a></dt>
<dd><p>get a stored file as a file-like object with binary contents or a local file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – the name of the file</p></li>
<li><p><strong>local</strong> (<em>str</em>) – if set the local path will be created and the file
stored there. If local does not have an extension it is assumed
to be a directory name, in which case the file is stored as the
same name.</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – the mode to use on .open() for the local file</p></li>
<li><p><strong>chunksize</strong> (<em>int</em>) – optional, the size of chunks to be read, as in</p></li>
<li><p><strong>open_kwargs</strong> (<em>dict</em>) – the kwargs to use .open() for the local file</p></li>
<li><p><strong>**kwargs</strong> – any kwargs passed to datasets.metadata()</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the file-like output handler (local is None)
the path to the local file (local is given)</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.python.org/3/glossary.html#term-file-object">https://docs.python.org/3/glossary.html#term-file-object</a>
<a class="reference external" href="https://docs.python.org/3/glossary.html#term-binary-file">https://docs.python.org/3/glossary.html#term-binary-file</a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.rawfiles.PythonRawFileBackend.put">
<span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/rawfiles.html#PythonRawFileBackend.put"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.rawfiles.PythonRawFileBackend.put" title="Link to this definition">¶</a></dt>
<dd><p>store the binary contents of a file-like object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>str</em><em>|</em><em>Path</em><em>|</em><em>filelike</em>) – the object to be stored</p></li>
<li><p><strong>name</strong> (<em>str</em>) – the name for the object’s metadata</p></li>
<li><p><strong>attributes</strong> (<em>dict</em>) – optional, metadata attributes</p></li>
<li><p><strong>encoding</strong> (<em>str</em>) – optional, a valid encoding, such as utf8</p></li>
<li><p><strong>uri</strong> (<em>str</em>) – optional, the local or remote file url compatible with smart_open</p></li>
<li><p><strong>**kwargs</strong></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Metadata</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.backends.rawfiles.PythonRawFileBackend.supports">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">supports</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/backends/rawfiles.html#PythonRawFileBackend.supports"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.backends.rawfiles.PythonRawFileBackend.supports" title="Link to this definition">¶</a></dt>
<dd><p>test if this backend supports this obj</p>
</dd></dl>

</dd></dl>

</section>
<section id="mixins">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Mixins</a><a class="headerlink" href="#mixins" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="omegaml.mixins.store.ProjectedMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">omegaml.mixins.store.</span></span><span class="sig-name descname"><span class="pre">ProjectedMixin</span></span><a class="reference internal" href="../_modules/omegaml/mixins/store/projected.html#ProjectedMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.mixins.store.ProjectedMixin" title="Link to this definition">¶</a></dt>
<dd><p>A OmegaStore mixin to process column specifications in dataset name</p>
<dl class="py method">
<dt class="sig sig-object py" id="omegaml.mixins.store.ProjectedMixin.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/mixins/store/projected.html#ProjectedMixin.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.mixins.store.ProjectedMixin.get" title="Link to this definition">¶</a></dt>
<dd><p>Return a projected dataset given a name of form name[colspec]</p>
<p>colspec can be any of</p>
<ul class="simple">
<li><p>a comma separated list of columns, e.g. <code class="docutils literal notranslate"><span class="pre">foo[a,b]</span></code></p></li>
<li><p>an open-ended slice, e.g. <code class="docutils literal notranslate"><span class="pre">foo[a:]</span></code> =&gt; all columns following a, inclusive</p></li>
<li><p>an closed slice, e.g. <code class="docutils literal notranslate"><span class="pre">foo[a:b]</span></code> =&gt; all columns between a,b, inclusive</p></li>
<li><p>a close-ended slice, e.g. <code class="docutils literal notranslate"><span class="pre">foo[:b]</span></code> =&gt; all columns up to b, inclusive</p></li>
<li><p>an empty slice, e.g. <code class="docutils literal notranslate"><span class="pre">foo[:]</span></code> =&gt; all columns</p></li>
<li><p>a list of columns to exclude, e.g. <code class="docutils literal notranslate"><span class="pre">foo[^b]</span></code> =&gt; all columns except b</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> – (str) the name of the dataset, optionally including a
column specification</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the dataset with projected columns</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="omegaml.mixins.store.LazyGetMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">omegaml.mixins.store.</span></span><span class="sig-name descname"><span class="pre">LazyGetMixin</span></span><a class="reference internal" href="../_modules/omegaml/mixins/store/lazyget.html#LazyGetMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.mixins.store.LazyGetMixin" title="Link to this definition">¶</a></dt>
<dd><p>OmegaStore mixin to support chunked lazy get via name</p>
<p>Usage:</p>
<blockquote>
<div><p>equivalent of <code class="docutils literal notranslate"><span class="pre">om.datasets.get('foo',</span> <span class="pre">lazy=True).iterchunks()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mdf</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foo#&#39;</span><span class="p">)</span>
<span class="n">mdf</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foo#iterchunks&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>equivalent of <code class="docutils literal notranslate"><span class="pre">om.datasets.get('foo',</span> <span class="pre">lazy=True).iterchunks(chunksize=10)</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mdf</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foo#iterchunks:chunksize=10&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>equivalent of <code class="docutils literal notranslate"><span class="pre">om.datasets.get('foo',</span> <span class="pre">lazy=True).iloc[0:10]</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mdf</span> <span class="o">=</span> <span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foo#rows:start=1,end=10&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="omegaml.mixins.store.virtualobj.VirtualObjectMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">omegaml.mixins.store.virtualobj.</span></span><span class="sig-name descname"><span class="pre">VirtualObjectMixin</span></span><a class="reference internal" href="../_modules/omegaml/mixins/store/virtualobj.html#VirtualObjectMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.mixins.store.virtualobj.VirtualObjectMixin" title="Link to this definition">¶</a></dt>
<dd><p>process virtual objects</p>
<p>This checks if an object is a VirtualObject and if so
retrieves the handler and processes it.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="omegaml.mixins.store.promotion.PromotionMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">omegaml.mixins.store.promotion.</span></span><span class="sig-name descname"><span class="pre">PromotionMixin</span></span><a class="reference internal" href="../_modules/omegaml/mixins/store/promotion.html#PromotionMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.mixins.store.promotion.PromotionMixin" title="Link to this definition">¶</a></dt>
<dd><p>Promote objects from one bucket to another</p>
<dl>
<dt>Promotion Methods:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt><cite>getput</cite> - performs target.put(source.get()) and copies metadata</dt><dd><p>attributes by merging target.metadata’s .attributes and .kind_meta</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>metadata</cite> - creates a new metadata data entry in target, copying</dt><dd><p>metadata attributes and kind_meta. Does not get/put the object itself
(i.e. no associated data is promoted).</p>
</dd>
</dl>
</li>
<li><p><cite>data</cite> - like <cite>getput</cite>, but does not merge metadata</p></li>
<li><dl class="simple">
<dt><cite>export</cite> - performs .to_archive() and .from_archive(), effectively</dt><dd><p>copying metadata, the associated gridfile (if available) and collection
data (if available). This is equivalent to <cite>om runtime export</cite>.</p>
</dd>
</dl>
</li>
</ul>
<p>The default promotion method is getput(), or the object’s backend.PROMOTE
method, if specified.</p>
</dd>
</dl>
<p>Some object backends provide a default promotion other than getput:</p>
<ul class="simple">
<li><dl class="simple">
<dt>sqlalchemy.conx - uses the <cite>metadata</cite> promotion, effectively copying only</dt><dd><p>metadata. Use promote(…, method=’metadata,data’) to also promote data</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>virtualobj.dill - uses the <cite>export</cite> promotion, effectively copying all</dt><dd><p>metadata and the associated &#64;virtualobj function. If the source object
is a versioned model, this copies the current version and metadata. To
copy a specific version, use promote(<a class="reference external" href="mailto:'model&#37;&#52;&#48;version">‘model<span>&#64;</span>version</a>’). To create a
new version in the target bucket use promote(…, method=’getput’).</p>
</dd>
</dl>
</li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="omegaml.mixins.store.promotion.PromotionMixin.promote">
<span class="sig-name descname"><span class="pre">promote</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">put</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/mixins/store/promotion.html#PromotionMixin.promote"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.mixins.store.promotion.PromotionMixin.promote" title="Link to this definition">¶</a></dt>
<dd><p>Promote object to another store.</p>
<p>This effectively copies the object. If the objects exists in the
target it will be replaced.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the object</p></li>
<li><p><strong>other</strong> – the OmegaStore instance to promote to</p></li>
<li><p><strong>asname</strong> – the name to use in other, defaults to .metadata(name).name</p></li>
<li><p><strong>drop</strong> (<em>bool</em>) – if True calls other.drop(force=True) before promoting, defaults to False</p></li>
<li><p><strong>method</strong> (<em>str</em><em>|</em><em>list</em>) – specify the method or multiple methods in sequence, available methods
are ‘default’, ‘getput’, ‘metadata’, ‘data’. For ‘default’, the object backend’s
.PROMOTE property is used, defaulting to ‘getput’</p></li>
<li><p><strong>get</strong> (<em>dict</em>) – optional, specifies the store.get(<a href="#id1"><span class="problematic" id="id2">**</span></a>kwargs)</p></li>
<li><p><strong>put</strong> (<em>dict</em>) – optional, specifies the other.put(<a href="#id3"><span class="problematic" id="id4">**</span></a>kwargs)</p></li>
<li><p><strong>kwargs</strong> – additional kwargs are passed to the initial other.put(), for metadata promotion</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The Metadata of the new object</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="omegaml.mixins.mdf.iotools.IOToolsStoreMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">omegaml.mixins.mdf.iotools.</span></span><span class="sig-name descname"><span class="pre">IOToolsStoreMixin</span></span><a class="reference internal" href="../_modules/omegaml/mixins/mdf/iotools.html#IOToolsStoreMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.mixins.mdf.iotools.IOToolsStoreMixin" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="omegaml.mixins.mdf.iotools.IOToolsStoreMixin.read_csv">
<span class="sig-name descname"><span class="pre">read_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">csvfn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunksize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'r'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/mixins/mdf/iotools.html#IOToolsStoreMixin.read_csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.mixins.mdf.iotools.IOToolsStoreMixin.read_csv" title="Link to this definition">¶</a></dt>
<dd><p>read large files from s3, hdfs, http/s, sftp, scp, ssh, write to om.datasets</p>
<p>Usage:</p>
<blockquote>
<div><p>To insert a local csv file into a dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;/path/filename.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;dataset-name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To insert a file stored in any of the supported locations specify
its fully qualified location and filename. The specific format must
be specified according to the <a class="reference external" href="https://github.com/RaRe-Technologies/smart_open">smart_open</a> library:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://...&#39;</span><span class="p">,</span> <span class="s1">&#39;dataset-name&#39;</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;s3://...&#39;</span><span class="p">,</span> <span class="s1">&#39;dataset-name&#39;</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;hdfs://...&#39;</span><span class="p">,</span> <span class="s1">&#39;dataset-name&#39;</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;sftp://...&#39;</span><span class="p">,</span> <span class="s1">&#39;dataset-name&#39;</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;scp://...&#39;</span><span class="p">,</span> <span class="s1">&#39;dataset-name&#39;</span><span class="p">)</span>
<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;ssh://...&#39;</span><span class="p">,</span> <span class="s1">&#39;dataset-name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Optionally define a function to receives each chunk as a dataframe
and apply further processing (e.g. transformations, filtering):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="c1"># apply any processing to df</span>
    <span class="k">return</span> <span class="n">df</span>

<span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="o">....</span><span class="p">,</span> <span class="n">apply</span><span class="o">=</span><span class="n">process</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>csvfn</strong> (<em>str</em>) – the fully qualified path and name of the csv file,
according to the <a class="reference external" href="https://github.com/RaRe-Technologies/smart_open">smart_open</a> library</p></li>
<li><p><strong>chunksize</strong> (<em>int</em>) – the size of each chunk processed before writing
to the dataset</p></li>
<li><p><strong>append</strong> (<em>bool</em>) – if True, appends to the dataset. defaults to False</p></li>
<li><p><strong>apply</strong> (<em>callable</em>) – if specified, each chunk is forwarded as a
DataFrame and the returned result is inserted to the dataset.
Use this for transformations or filtering</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – file open mode, defaults to r</p></li>
<li><p><strong>open_kwargs</strong> (<em>dict</em>) – additional kwargs to <a class="reference external" href="https://github.com/RaRe-Technologies/smart_open">smart_open</a></p></li>
<li><p><strong>**kwargs</strong> – additional kwargs are passed to <code class="docutils literal notranslate"><span class="pre">pandas.read_csv</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>MDataFrame</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><cite>smart_open</cite> <a class="reference external" href="https://github.com/RaRe-Technologies/smart_open">https://github.com/RaRe-Technologies/smart_open</a></p></li>
<li><p><cite>pandas.read_csv</cite></p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="omegaml.mixins.mdf.iotools.IOToolsStoreMixin.to_csv">
<span class="sig-name descname"><span class="pre">to_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">csvfn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunksize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'w'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/omegaml/mixins/mdf/iotools.html#IOToolsStoreMixin.to_csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#omegaml.mixins.mdf.iotools.IOToolsStoreMixin.to_csv" title="Link to this definition">¶</a></dt>
<dd><p>write any dataframe to s3, hdfs, http/s, sftp, scp, ssh</p>
<p>Usage:</p>
<blockquote>
<div><p>To write a dataframe:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">om</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">write_csv</span><span class="p">(</span><span class="s1">&#39;dataframe-dataset&#39;</span><span class="p">,</span> <span class="s1">&#39;/path/to/filename&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To write a large dataframe in chunks:</p>
<blockquote>
<div><p>om.datasets.write_csv(‘dataframe-dataset’, ‘/path/to/filename’,
chunksize=100)</p>
</div></blockquote>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – the name of the dataframe dataset</p></li>
<li><p><strong>csvfn</strong> (<em>str</em>) – the fully qualified path and name of the csv file,
according to the <a class="reference external" href="https://github.com/RaRe-Technologies/smart_open">smart_open</a> library</p></li>
<li><p><strong>chunksize</strong> (<em>int</em>) – the size of each chunk processed before writing
to the file</p></li>
<li><p><strong>apply</strong> (<em>callable</em>) – if specified, each chunk is forwarded as a
DataFrame and the returned result is written to the file.
Use this for transformations or filtering</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – file open mode, defaults to w</p></li>
<li><p><strong>open_kwargs</strong> (<em>dict</em>) – additional kwargs to <a class="reference external" href="https://github.com/RaRe-Technologies/smart_open">smart_open</a></p></li>
<li><p><strong>**kwargs</strong> – additional kwargs are passed to <code class="docutils literal notranslate"><span class="pre">pandas.to_csv</span></code></p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.to_csv</span></code></p></li>
</ul>
</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="core.html" class="btn btn-neutral float-left" title="core models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="models.html" class="btn btn-neutral float-right" title="om.models" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025 (c) omegaml.io by one2seven GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>

      </div>
    </section>
  </div>
  <!-- version plugin for rtd template without sidebar -->
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: release/0.16.3
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Tags</dt>
      <dd><a href="../../../0.11.3/index.html" class="version-ref-0.11.3">0.11.3</a></dd>
      <dd><a href="../../../0.11.4/index.html" class="version-ref-0.11.4">0.11.4</a></dd>
      <dd><a href="../../../0.12.0/index.html" class="version-ref-0.12.0">0.12.0</a></dd>
      <dd><a href="../../../0.13.0/index.html" class="version-ref-0.13.0">0.13.0</a></dd>
      <dd><a href="../../../0.13.2/index.html" class="version-ref-0.13.2">0.13.2</a></dd>
      <dd><a href="../../../0.13.4/index.html" class="version-ref-0.13.4">0.13.4</a></dd>
      <dd><a href="../../../0.13.5/index.html" class="version-ref-0.13.5">0.13.5</a></dd>
      <dd><a href="../../../0.13.6/index.html" class="version-ref-0.13.6">0.13.6</a></dd>
      <dd><a href="../../../0.13.7/index.html" class="version-ref-0.13.7">0.13.7</a></dd>
      <dd><a href="../../../0.14.0/index.html" class="version-ref-0.14.0">0.14.0</a></dd>
      <dd><a href="../../../0.15.1/index.html" class="version-ref-0.15.1">0.15.1</a></dd>
      <dd><a href="../../../0.15.2/reference/datasets.html" class="version-ref-0.15.2">0.15.2</a></dd>
      <dd><a href="../../../latest/reference/datasets.html" class="version-ref-latest">latest</a></dd>
      <dd><a href="../../0.15.3/reference/datasets.html" class="version-ref-release/0.15.3">0.15.3</a></dd>
      <dd><a href="../../0.15.5/reference/datasets.html" class="version-ref-release/0.15.5">0.15.5</a></dd>
      <dd><a href="../../0.16.0/reference/datasets.html" class="version-ref-release/0.16.0">0.16.0</a></dd>
      <dd><a href="../../0.16.1/reference/datasets.html" class="version-ref-release/0.16.1">0.16.1</a></dd>
      <dd><a href="../../0.16.2/reference/datasets.html" class="version-ref-release/0.16.2">0.16.2</a></dd>
      <dd><a href="datasets.html" class="version-ref-release/0.16.3">0.16.3</a></dd>
      <dd><a href="../../0.16.4/reference/datasets.html" class="version-ref-release/0.16.4">0.16.4</a></dd>
      <dd><a href="../../0.17.0/reference/datasets.html" class="version-ref-release/0.17.0">0.17.0</a></dd>
      <dd><a href="../../0.4/index.html" class="version-ref-release/0.4">0.4</a></dd>
      <dd><a href="../../0.5/index.html" class="version-ref-release/0.5">0.5</a></dd>
      <dd><a href="../../0.9/index.html" class="version-ref-release/0.9">0.9</a></dd>
      <dd><a href="../../../stable/reference/datasets.html" class="version-ref-stable">stable</a></dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="../../../master/reference/datasets.html">master</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>